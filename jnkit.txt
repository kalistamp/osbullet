#!/usr/bin/env python3

import requests
from bs4 import BeautifulSoup

def scrape_page(url):
    try:
        # Get the page content
        response = requests.get(url)
        
        # Create BeautifulSoup object
        soup = BeautifulSoup(response.content, 'html.parser')
        
        # Get all elements that might contain text
        all_text_elements = soup.find_all(text=True)
        
        # Filter out script and style elements
        visible_text = []
        for element in all_text_elements:
            if element.parent.name not in ['script', 'style', 'meta', '[document]']:
                visible_text.append(element.strip())
        
        # Filter out empty strings and join with newlines
        return '\n'.join(filter(None, visible_text))
        
    except Exception as e:
        return f"Error scraping: {str(e)}"

# Main script
base_url = "https://www.wantstobehired.com"

# Create output file
with open('webpage_full_text.txt', 'w', encoding='utf-8') as f:
    # For each page
    for page in range(1, 95):  # 94 pages total
        print(f"Processing page {page}")
        
        # Construct URL
        url = f"{base_url}?page={page}" if page > 1 else base_url
        
        # Get text content
        text_content = scrape_page(url)
        
        # Write to file with page marker
        f.write(f"\n\n================ PAGE {page} ================\n\n")
        f.write(text_content)

print("Done! Check webpage_full_text.txt for the complete text content.")
